(()=>{"use strict";const e=window.wp.element,t=window.wp.plugins,n=window.wp.editPost,d=window.wp.i18n,o=window.wp.date,i=window.wp.data,a=window.wp.compose,l=window.wp.components,r=window.wp.blockEditor,m=(0,a.compose)([(0,i.withSelect)((e=>({editedModified:e("core/editor").getEditedPostAttribute("modified"),currentModified:e("core/editor").getCurrentPostAttribute("modified"),publishDate:e("core/editor").getEditedPostAttribute("date"),meta:e("core/editor").getEditedPostAttribute("meta")}))),(0,i.withDispatch)((e=>({handleModified(t){document.getElementById("clm-modified-date").setAttribute("value",t),e("core/editor").editPost({modified:t})}})))])((t=>{let{editedModified:n,currentModified:i,publishDate:a,handleModified:m,meta:c}=t;const s=(0,o.__experimentalGetSettings)(),u=`${s.formats.date} ${s.formats.time}`,{_stopmodifiedupdate:p}={...c};return(0,e.createElement)(e.Fragment,null,p?(0,e.createElement)(e.Fragment,null,(0,e.createElement)("span",null,(0,d.__)("Last modified","change-last-modified-date")),(0,e.createElement)("b",null,(0,o.format)(u,i))):(0,e.createElement)(e.Fragment,null,(0,e.createElement)("span",null,(0,d.__)("Modified","change-last-modified-date")),(0,e.createElement)(l.Dropdown,{popoverProps:{placement:"bottom-start"},contentClassName:"edit-post-post-schedule__dialog",renderToggle:t=>{let{onToggle:d,isOpen:i}=t;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l.Button,{className:"edit-post-post-schedule__toggle",onClick:d,"aria-expanded":i,variant:"tertiary"},(0,o.format)(u,n)))},renderContent:()=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)(r.__experimentalInspectorPopoverHeader,{title:(0,d.__)("Modified","change-last-modified-date"),actions:[{label:(0,d.__)("Copy published","change-last-modified-date"),onClick:()=>m(a)}]}),(0,e.createElement)(l.DateTimePicker,{currentDate:n,onChange:e=>m(e),is12Hour:s.formats.time.includes("a"),__nextRemoveHelpButton:!0,__nextRemoveResetButton:!0}))})))})),c=(0,a.compose)([(0,i.withSelect)((e=>({meta:e("core/editor").getEditedPostAttribute("meta")}))),(0,i.withDispatch)((e=>({handleFreezeModified(t,n){const d={...t,_stopmodifiedupdate:n};e("core/editor").editPost({meta:d})}})))])((t=>{let{meta:n,handleFreezeModified:o}=t;const{_stopmodifiedupdate:i}={...n};return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("span",null,(0,d.__)("Freeze modified date","change-last-modified-date")),(0,e.createElement)(l.FormToggle,{checked:i,onChange:()=>o(n,!i)}))}));!function(){const e=document.createElement("input");e.type="hidden",e.name="clm_modified",e.id="clm-modified-date",document.getElementsByClassName("metabox-location-normal")[0].appendChild(e)}(),(0,t.registerPlugin)("post-change-last-modified",{render:()=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n.PluginPostStatusInfo,null,(0,e.createElement)(m,null)),(0,e.createElement)(n.PluginPostStatusInfo,null,(0,e.createElement)(c,null)))})})();